{% extends 'base.html' %}
{% load static %}
{% block content %}

<form id="form-id" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <h1 class='text-center'> Upload Syllabus: </h1>
  <div style="width: 35%; margin: auto; display: block;">
    <div class="form-group group">
      <h4 style='float: left;' for="prof"> <b>Professor:</b> </h4>
      <h4 style='float: right;'> e.g John Doe</b> </h4>
      <input style="width:100%;" id="prof" type="text" name="prof" required> <br>
    </div>
    <div class="form-group group">
      <h4 style='float: left;' for="course"> <b>Course:</b> </h4>
      <h4 style='float: right;'> e.g CS 4102</b> </h4>
      <input style="width:100%;" id="course" type="text" name="course" required> <br>
    </div>
    <div class="form-group group">
      <h4 style='float: left;' for="title"> <b>Course Title:</b> </h4>
      <h4 style='float: right;'> e.g Algorithms</b> </h4>
      <input style="width:100%;" id="title" type="text" name="title" required> <br>
    </div>
    <div class="form-group group">
      <h4 style='float: left;' for="file"> <b>Syllabus:</b> </h4>
      <h4 style='float: right;'> PDFs only</b> </h4>
      <input style="width:100%;" id="file" type="file" name="file" accept="application/pdf" required> <br>
    </div>
    <div class="form-group group">
      <h4 style='float: left;' for="file"> <b>Semester:</b> </h4>
      <select name="semester" id="semester" style="margin: 1%;" required>
        <option value="fall">Fall</option>
        <option value="spring">Spring</option>
        <option value="summer">Summer</option>
      </select>
      <select name="year" id="year" required>
        <option value="2020">2020</option>
        <option value="2019">2019</option>
        <option value="2018">2018</option>
        <option value="2017">2017</option>
      </select>
    </div>
  </div>
  <input class="btn btn-success" id='button' style="display: block; margin: auto; margin-bottom: 1px;" type="submit" value="Submit"> 
</form><br>

{% if success %}
<div id="message" class="alert text-center" style="color: white; border-color: #43a546; background-color: #43a546; width: 40%; margin: auto;" role="alert"> Addition Successful! </div>
{% else %}
<div id="message" class="alert text-center" style="color: white; border-color: #d33840; background-color: #d33840; width: 40%; margin: auto;" role="alert"> {{message}} </div>
{% endif %} 
<h6 class="text-center" style="margin-top:5px"> Please be aware of any policies your school may have about the sharing of syllabi before we get the professor consent system up. <br> By submitting you certify that you have done this</h6>

<a href="/"><img class="left" src="{% static 'left.png' %}"></a>

<script type="text/javascript">
  $(function(){
      $("#file").on('change', function(event) {
          var file = event.target.files[0];
          if(file.size>=5*1024*1024) {
              document.getElementById('message').innerHTML = "Upload PDFs of size less than 1MB please";
              $("#form-id").get(0).reset(); 
              return;
          }
          if(!file.type.match('application/pdf.*')) {
              document.getElementById('message').innerHTML = "Upload PDFs only please!";
              $("#form-id").get(0).reset(); 
              return;
          }
      });
  });
</script>
{% endblock %}